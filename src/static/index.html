<!DOCTYPE>
<html>
<head>
    <title>One Thousand Pens</title>

    <link rel="icon" type="image/png" href="/static/assets/favicon-16x16.png" sizes="16x16">

    <link rel="stylesheet" href="static/styles.css"/>

    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
    <script src="static/js/libs/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script src="static/js/libs/backbone.min.js"></script>
    
</head>
<body>

<script type="text/template" id="poll-template">
    <div id="vote-title">
        Next Word
    </div>
    <div id="countdown-timer" style="width: <%-secs_left/max_seconds * 100%>%;"></div>

	<%
        // Sort the object into an array by number of votes
        var sorted_votes = [];
        for (word in votes) {
            sorted_votes.push([word, votes[word]]);
        }
        sorted_votes.sort(function(a, b) {return b[1] - a[1]});

        // Get the highest vote number to determine width of UI
        // elements
        if (sorted_votes.length > 0) {
            var max_vote = sorted_votes[0][1];
        } else {
            var max_vote = 0;
        }
	%>


    <% for (i = 0; i < sorted_votes.length; i++) {
           var word = sorted_votes[i][0];
           var votes = sorted_votes[i][1];
    %>
        <div class="votes-display">
            <span class="vote-word"> <%-word%> </span>
            <span class="vote-number"> <%-votes%> </span>
            <div class="vote-percentage" style="width: <%-votes/max_vote * 100%>%;"></div>
        </div>
    <% } %>
</script>

<script type="text/template" id="words-template">
    <% for (i = 0; i < prev_words.length; i++) { %>
        <%-prev_words[i]%>
    <% } %>
</script>

<div id="top">
    <div id="main-pane">
        <div id="title">One Thousand Pens</div>
        <div id="story-content"></div>
    </div>

    <div id="poll-content"></div>
</div>

<div id="vote-background">
    <div id="vote-content">
        <form id="vote-form" action="#">
            <input type="text" id="vote-input" maxlength="15">
            <input id="vote-input-button" type="submit" value="Vote">
        </form>
    </div>
</div>

<script src="static/js/models.js"></script>
<script src="static/js/views.js"></script>
<script src="static/js/events.js"></script>
<script src="static/js/onethousandpens.js"></script>

</body>
</html>